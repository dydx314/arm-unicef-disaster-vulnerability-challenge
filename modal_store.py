from modal import Image, Volume

REMOTE_DIR = "/code"

volume = Volume.from_name("zindi", create_if_missing=True)
zindi_volumes = {REMOTE_DIR: volume}

zindi_image = Image.debian_slim(python_version="3.10").pip_install_from_requirements(
    "requirements.txt"
)


def batch_upload_to_modal():
    print("Uploading to volume...")
    with volume.batch_upload(force=True) as batch:
        batch.put_directory(".", ".")
    print("Upload complete.")


# run when needed
# batch_upload_to_modal()
# print(volume.listdir("/"))
# volume.remove_file("zindi", recursive=True)
