#run through rcnn_modal.py, verify each row of the csv

import os
import numpy as np
import pandas as pd

data = pd.read_csv("./test_output/output_final1.csv")
for i in range(data.shape[0]):
    new_value = data.iloc[i, 0][:-1] + str(int(data.iloc[i, 0][-1]) + 1)
    data.iloc[i, 0] = new_value

data.to_csv("./test_output/output_final2.csv", index=False)

# print(data)

# n = 0
# error = 0
# print(data.shape[0])
# for i in range(data.shape[0]):
#     image_id = data.iloc[i][0][:-6]
   
#     class_name = int(data.iloc[i][0][-1])
#     #print(class_name, data.iloc[i][0])
#     #labels are at - 
#     label_path = "./data/val/labels/" + image_id + ".txt"
#     if (os.path.isfile(label_path) == False):
#         print(label_path)
#         continue

#     label_data = np.loadtxt(label_path)
#     #now convert label_data to a 2d array if its 1D
#     if len(label_data.shape) == 1:
#         label_data = np.array([label_data])
    
#     counts = np.sum(label_data[:,0] == class_name)
    
#     n += 1
#     print(np.abs((counts - data.iloc[i][1]))/np.max(counts, data.iloc[i][1]))
#     error = (n)/(n+1) * error +  np.abs((counts - data.iloc[i][1]))/((n+1) * np.max(counts, data.iloc[i][1]))

# print(error)
    
